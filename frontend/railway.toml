# ADX-Agent Frontend Railway Configuration
# Optimized for React 19 + Next.js 14 + Ant Design X

[build]
builder = "nixpacks"
buildCommand = "npm ci && npm run build"
watchPatterns = [
    "src/**",
    "public/**",
    "app/**",
    "components/**",
    "lib/**"
]

[deploy]
startCommand = "npm start"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Environment-specific configurations
[deploy.environments.production]
variables = [
    "NODE_ENV=production",
    "NEXT_PUBLIC_API_URL=https://api.adx-agent.railway.app"
]

[deploy.environments.staging]
variables = [
    "NODE_ENV=staging",
    "NEXT_PUBLIC_API_URL=https://staging-api.adx-agent.railway.app"
]